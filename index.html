<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Memecoin Faucet</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --dark-bg: #0D1117;
            --light-bg: #161B22;
            --border-color: #30363D;
            --text-color: #c9d1d9;
            --text-secondary: #8b949e;
            --neon-start: #33D3B5;
            --neon-end: #2AB8F5;
        }
        body {
            font-family: 'Poppins', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 2rem 1rem;
            background-color: var(--dark-bg);
            color: var(--text-color);
            box-sizing: border-box;
        }
        .container {
            background-color: var(--light-bg);
            padding: 2.5rem;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            text-align: center;
            width: 100%;
            max-width: 480px;
            margin-bottom: 2rem;
        }
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(90deg, var(--neon-start), var(--neon-end));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 15px rgba(51, 211, 181, 0.3);
        }
        p {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }
        input {
            width: 100%;
            padding: 14px;
            margin: 1rem 0;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--dark-bg);
            color: var(--text-color);
            font-size: 1rem;
            box-sizing: border-box;
        }
        button {
            width: 100%;
            padding: 14px;
            background-image: linear-gradient(90deg, var(--neon-start), var(--neon-end));
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 0 20px rgba(42, 184, 245, 0.4);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(42, 184, 245, 0.6);
        }
        button:disabled {
            background-image: none;
            background-color: var(--border-color);
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        #message {
            margin-top: 1.5rem;
            font-size: 1rem;
            min-height: 24px;
        }
        .success { color: var(--neon-start); }
        .error { color: #f85149; }
        .info-section {
            width: 100%;
            max-width: 480px;
            text-align: left;
            margin-bottom: 2rem;
        }
        .info-section h2 {
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
            color: var(--neon-end);
        }
        .info-section ul {
            list-style: none;
            padding: 0;
            color: var(--text-secondary);
        }
        .info-section li {
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
        }
        .info-section li::before {
            content: 'üêæ';
            position: absolute;
            left: 0;
            color: var(--neon-start);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>MEMECOIN FAUCET</h1>
        <p>Your daily dose of memecoins, served fresh!</p>

        <input type="text" id="walletAddress" placeholder="Enter your Solana address...">
        <button id="claimButton">Claim Tokens!</button>
        <div id="message"></div>
    </div>

    <div class="info-section">
        <h2>About Our Coin</h2>
        <p>This coin is all about community! We believe in rewarding users who engage with our platform and help it grow. The more you participate, the more you can earn. Let's build something awesome together!</p>
    </div>

    <div class="info-section">
        <h2>Faucet Rules</h2>
        <ul>
            <li>You can claim 100 tokens every 24 hours.</li>
            <li>Please disable any ad-blocking software to support the faucet.</li>
            <li>Using a VPN, proxy, or multiple accounts is not allowed.</li>
        </ul>
    </div>

    <script>
        // --- JavaScript Magic Starts Here ---

        const claimButton = document.getElementById('claimButton');
        const walletAddressInput = document.getElementById('walletAddress');
        const messageDiv = document.getElementById('message');

        function showMessage(text, type) {
            messageDiv.textContent = text;
            messageDiv.className = type;
        }

        let adBlockerDetected = false;

        // Part 1: Check if an ad script fails to load.
        const checkNetwork = new Promise(resolve => {
            const baitScript = document.createElement('script');
            baitScript.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js';
            baitScript.onload = () => resolve(false); // Ad blocker not detected
            baitScript.onerror = () => resolve(true); // Ad blocker detected
            document.head.appendChild(baitScript);
            setTimeout(() => resolve(false), 2000); // Timeout to prevent hangs
        });

        // Part 2: Check for a common CSS hiding trick.
        const checkCSS = new Promise(resolve => {
            const baitDiv = document.createElement('div');
            baitDiv.className = 'ad-container'; // A common class name to bait ad blockers
            baitDiv.style.cssText = 'position: absolute; visibility: hidden; width: 1px; height: 1px;';
            document.body.appendChild(baitDiv);

            setTimeout(() => {
                const isBlocked = baitDiv.offsetHeight === 0;
                document.body.removeChild(baitDiv);
                resolve(isBlocked);
            }, 500);
        });

        // Combine the results of both checks
        Promise.all([checkNetwork, checkCSS]).then(results => {
            const networkBlocked = results[0];
            const cssBlocked = results[1];

            adBlockerDetected = networkBlocked || cssBlocked;

            if (adBlockerDetected) {
                claimButton.disabled = true;
                claimButton.textContent = 'Ad Blocker Detected';
                showMessage('Please disable your ad blocker to support and use the faucet.', 'error');
            } else {
                claimButton.disabled = false;
                claimButton.textContent = 'Claim Tokens!';
            }
        });

        claimButton.addEventListener('click', async () => {
            const walletAddress = walletAddressInput.value;
            if (!walletAddress) {
                showMessage('Please enter a wallet address!', 'error');
                return;
            }

            if (adBlockerDetected) {
                return; // Prevent claiming if ad blocker is active
            }

            claimButton.disabled = true;
            claimButton.textContent = 'Claiming...';
            showMessage('', 'info');
            try {
                const response = await fetch('https-your-faucet.onrender.com/claim', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', },
                    body: JSON.stringify({ wallet_address: walletAddress }),
                });
                const data = await response.json();
                if (response.ok) {
                    showMessage(data.message, 'success');
                    const explorerLink = `https://explorer.solana.com/tx/${data.transaction_signature}`;
                    messageDiv.innerHTML += ` <a href="${explorerLink}" target="_blank" style="color: var(--neon-end);">View Transaction</a>`;
                } else {
                    showMessage(data.error, 'error');
                }
            } catch (error) {
                console.error('Fetch error:', error);
                showMessage('Could not connect to the faucet server.', 'error');
            } finally {
                claimButton.disabled = false;
                claimButton.textContent = 'Claim Tokens!';
            }
        });
    </script>
</body>
</html>